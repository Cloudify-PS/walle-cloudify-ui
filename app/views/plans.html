<div class="cosmo-layout" id="plans">
    <!-- Side Panel - START -->
    <div class="properties-panel right-panel" ng-hide="!showProperties">
        <div class="title">
            {{showProperties.general.name}} {{'plans.details.details' | i18n }}
            <i ng-click="hideProperties()" class="fa fa-times-circle right close-properties-button"></i>
        </div>
        <div class="content">
            <div class="buttons-group no-embed" checkbox-toggle value="propSection">
                <button ng-repeat="(key, value) in showProperties" type="button" class="btn btn-default" value="{{key}}">{{ 'plans.' + key | i18n }}</button>
            </div>
            <div ng-switch="propSection" class="content-section">
                <div ng-switch-default="general">
                    <table>
                        <tr>
                            <td>{{ 'plans.details.key' | i18n }}</td>
                            <td>{{ 'plans.details.value' | i18n }}</td>
                        </tr>
                        <tr ng-repeat="(key, value) in showProperties.general">
                            <td>{{key}}</td><td>{{value}}</td>
                        </tr>
                    </table>
                </div>
                <div ng-switch-when="properties">
                    <table>
                        <tr>
                            <td>{{ 'plans.details.key' | i18n }}</td>
                            <td>{{ 'plans.details.value' | i18n }}</td>
                        </tr>
                        <tr ng-repeat="(key, value) in showProperties.properties">
                            <td>{{key}}</td><td>{{value}}</td>
                        </tr>
                    </table>
                </div>
                <div ng-switch-when="relationships">
                    <div ng-show="showProperties.relationships.length == undefined">{{ 'plans.details.noRelationships' | i18n }}</div>
                    <table ng-show="showProperties.relationships.length != undefined">
                        <tr>
                            <td>{{ 'plans.details.target' | i18n }}</td>
                            <td>{{ 'plans.details.type' | i18n }}</td>
                            <td>{{ 'plans.details.interface' | i18n }}</td>
                        </tr>
                        <tr ng-repeat="relationship in showProperties.relationships">
                            <td ng-click="viewNode(getNodeById(relationship.target_id))">{{relationship.target_id}}</td>
                            <td>{{relationship.type}}</td>
                            <td>
                                <!--<ul ng-repeat="(key, value) in relationship.source_interfaces">-->
                                    <!--<li>{{value}}</li>-->
                                <!--</ul>-->
                            </td>
                        </tr>
                    </table>
                </div>
                <pre ng-switch-when="interfaces">{{showProperties.interfaces | yaml:'No interfaces to display' }} </pre>
            </div>
        </div>
    </div>
    <!-- Side Panel - END -->
    <!-- Breadcrumbs - START -->
    <div class="content-header no-embed">
        <div class="breadcrumbs"><ul id="blueprints" breadcrumbs></ul></div>
     </div>
    <!-- Breadcrumbs - END -->
    <!-- Settings - START -->
    <div class="buttons-group no-embed" checkbox-toggle value="section">
        <button type="button" class="btn btn-default" value="topology">Topology</button>
        <button type="button" class="btn btn-default" value="network" data-ng-show="networks.networks.length">Network</button>
        <button type="button" class="btn btn-default" value="nodes">Nodes</button>
        <button type="button" class="btn btn-default" value="code">Source</button>
    </div>
    <div settings-toggles id="settings-button" class="no-embed" toggles="toggleBar" ng-show="section == 'topology'"></div>
    <!-- Settings - END -->
    <button class="deploy-button" ng-click="toggleDeployDialog(blueprint)">{{ 'blueprints.table.deployBtn' | i18n }}</button>

    <div ng-switch="section" class="content-section">
        <!-- Blueprint Contianter - START -->
        <div class="bpContainer" ng-switch-default="topology" blueprint:resize data-ng-class="{
        disableCompute: !toggleBar.compute,
        disableMiddleware: !toggleBar.middleware,
        disableModules: !toggleBar.modules,
        disableConnections: !toggleBar.connections
        }">
            <div bp-topology-nodes map="nodesTree" selected="viewNode(node_id)"></div>
            <div class="coordinates" blueprint:arrows="coordinates" arrow="true" color="#7A7A7A"></div>
        </div>
        <!-- Blueprint Container - END -->
        <!-- Network Topology - START -->
        <div class="networksContainer" ng-switch-when="network">
            <div bp:networks class="relations" ng-model="networkcoords"></div>
            <div data-ng-repeat="network in networks.external" class="network">
                <div class="line">
                    <div class="name">{{ network.name }}</div>
                    <div data-ng-repeat="networks in networks.external" class="subnet" bp:network:coordinate ng-model="network">
                        <p>{{ network.name }}</p>
                        <p class="cidr">External Network</p>
                    </div>
                </div>
            </div>
            <div data-ng-repeat="network in networks.networks" class="network">
                <div class="line">
                    <div class="name">{{ network.name }}</div>
                    <div data-ng-repeat="subnet in network.subnets" class="subnet" bp:network:coordinate ng-model="subnet">
                        <p>{{ subnet.name }}</p>
                        <p class="cidr">{{ subnet.cidr }}</p>
                    </div>
                </div>
                <div class="devices">
                    <div data-ng-repeat="device in network.devices" class="device">
                        <div data-ng-class="{'true': 'portarea'}[device.ports.length > 0]">
                            <div class="inner">
                                <div class="buttons no-embed">
                                    <ul>
                                        <li data-ng-click="viewNode(device)" class="topology-glyph node-details"></li>
                                    </ul>
                                </div>
                                <i class="topology-glyph {{ device.icon }}" bp:network:coordinate ng-model="device"></i>
                            </div>
                            <div class="ports" data-ng-repeat="port in device.ports">
                                <div class="buttons no-embed">
                                    <ul>
                                        <li data-ng-click="viewNode(device)" class="topology-glyph node-details"></li>
                                    </ul>
                                </div>
                                <i class="topology-glyph {{ port.icon }}" bp:network:coordinate ng-model="port"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Network Topology - END -->
        <!-- Nodes - START -->
        <div ng-switch-when="nodes">
            <table class="table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Number of instances</th>
                        <th>Contained in</th>
                        <th>Connected to</th>
                        <th><!--Actions--></th>
                    </tr>
                </thead>
                <tbody data-ng-repeat="row in dataTable">
                    <tr>
                        <td><i class="topology-glyph {{ row.class }}"></i></td>
                        <td>{{ row.name }}</td>
                        <td>{{ row.type }}</td>
                        <td>{{ row.instances.deploy }}</td>
                        <td>
                            <span data-ng-if="getRelationshipByType(row, 'contained').length > 0" data-ng-repeat="container in getRelationshipByType(row, 'contained')">{{ container.name }}</span>
                            <span data-ng-if="getRelationshipByType(row, 'contained').length == 0">--</span>
                        </td>
                        <td>
                            <span data-ng-if="getRelationshipByType(row, 'connected').length > 0" data-ng-repeat="connection in getRelationshipByType(row, 'connected')">{{ connection.name }}</span>
                            <span data-ng-if="getRelationshipByType(row, 'connected').length == 0">--</span>
                        </td>
                        <td>
                            <ul>
                                <li data-ng-click="viewNode(indexNodes[row.id])" class="topology-glyph node-details"></li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Nodes - END -->
        <!-- Code - START -->
        <div ng-switch-when="code">
            <pre unselectable="on">
                <div code:highlight="yml" ng-model="dataCode"></div>
            </pre>
        </div>
        <!-- Code - END -->
    </div>

    <div ng-show="isDeployDialogVisible" ng-controller="DeployDialogCtrl">
        <div class="dialogBoxBg"></div>
        <div id="deployDialogContainer" class="dialogBox">
            <div class="dialogTitle">
                <label>{{ 'blueprints.deployDialog.title' | i18n }} {{blueprint.id}}</label>
            </div>
            <div class="dialogDescription">{{ 'blueprints.deployDialog.description' | i18n }}</div>
            <div class="dialogClose dialogButton" ng-click="closeDialog()"></div>
            <div class="dialogDeploymentName">
                <input type="text" ng-model="deploymentId" placeholder="{{ 'blueprints.deployDialog.deployName' | i18n }}">
            </div>
            <div id="deploy-error-message" ng-show="isDeployError()">{{deployErrorMessage}}</div>
            <div class="buttonsContainer deployButtons">
                <button id="deployBtn" class="dialogButton" ng-class="{disabled: !isDeployEnabled(), enabled: isDeployEnabled()}" ng-click="deployBlueprint(blueprint)">{{ 'blueprints.deployDialog.deployBtn' | i18n }}</button>
            </div>
        </div>
    </div>
</div>